(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{550:function(s,n,a){"use strict";a.r(n);var e=a(6),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"reactivecocoa基础"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reactivecocoa基础"}},[s._v("#")]),s._v(" ReactiveCocoa基础")]),s._v(" "),a("blockquote",[a("p",[s._v("本文修改自"),a("a",{attrs:{href:"http://www.jianshu.com/p/87ef6720a096",target:"_blank",rel:"noopener noreferrer"}},[s._v("最快让你上手ReactiveCocoa之基础篇"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("有关对 "),a("strong",[s._v("ReactiveCocoa")]),s._v(" 的看法可以看一下唐巧的这篇"),a("a",{attrs:{href:"https://gold.xitu.io/entry/568bd2ae60b2e57ba2cd2c7b",target:"_blank",rel:"noopener noreferrer"}},[s._v("ReactiveCocoa 讨论会"),a("OutboundLink")],1)])]),s._v(" "),a("p",[a("img",{attrs:{src:"http://ww2.sinaimg.cn/large/006y8lVagw1fb7g0gukk8j30m90rl78j.jpg",alt:"ReactiveCocoa思维导图"}})]),s._v(" "),a("h1",{attrs:{id:"reactivecocoa简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reactivecocoa简介"}},[s._v("#")]),s._v(" ReactiveCocoa简介")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/ReactiveCocoa/ReactiveCocoa",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"http://ww1.sinaimg.cn/large/006y8lVagw1fb7g6on3iwj30c2029q2z.jpg",alt:""}}),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("ReactiveCocoa（简称为RAC）,是由Github开源的一个应用于iOS和OS开发的新框架,Cocoa是苹果整套框架的简称，因此很多苹果框架喜欢以Cocoa结尾。")]),s._v(" "),a("p",[s._v("在我们iOS开发过程中，当某些事件响应的时候，需要处理某些业务逻辑,这些事件都用不同的方式来处理。")]),s._v(" "),a("p",[s._v("比如按钮的点击使用action，ScrollView滚动使用delegate，属性值改变使用KVO等系统提供的方式。其实这些事件，都可以通过RAC处理")]),s._v(" "),a("p",[s._v("ReactiveCocoa为事件提供了很多处理方法，而且利用RAC处理事件很方便，可以把要处理的事情，和监听的事情的代码放在一起，这样非常方便我们管理，就不需要跳到对应的方法里。")]),s._v(" "),a("p",[s._v("非常符合我们开发中高聚合，低耦合的思想。")]),s._v(" "),a("h1",{attrs:{id:"reactivecocoa编程思想"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reactivecocoa编程思想"}},[s._v("#")]),s._v(" ReactiveCocoa编程思想")]),s._v(" "),a("p",[s._v("在开发中我们也不能太依赖于某个框架，否则这个框架不更新了，导致项目后期没办法维护，比如之前Facebook提供的 "),a("code",[s._v("Three20")]),s._v(" 框架，在当时也是神器，但是后来不更新了，也就没什么人用了。因此我感觉学习一个框架，还是有必要了解它的编程思想。")]),s._v(" "),a("p",[s._v("先简单介绍下目前咱们已知的编程思想:")]),s._v(" "),a("h4",{attrs:{id:"响应式编程思想"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#响应式编程思想"}},[s._v("#")]),s._v(" 响应式编程思想")]),s._v(" "),a("p",[a("strong",[s._v("响应式编程思想")]),s._v("：不需要考虑调用顺序，只需要知道考虑结果，类似于蝴蝶效应，产生一个事件，会影响很多东西，这些事件像流一样的传播出去，然后影响结果，借用面向对象的一句话，万物皆是流。")]),s._v(" "),a("p",[a("code",[s._v("代表")]),s._v("：KVO")]),s._v(" "),a("h4",{attrs:{id:"链式编程思想"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#链式编程思想"}},[s._v("#")]),s._v(" 链式编程思想")]),s._v(" "),a("p",[a("strong",[s._v("链式编程")]),s._v(" 是将多个操作（多行代码）通过点号(.)链接在一起成为一句代码,使代码可读性好。如:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("make.add(1).add(2).sub(5).muilt(-4).divide(4);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("code",[s._v("特点")]),s._v("：方法的返回值是block,block必须有返回值（本身对象），block参数（需要操作的值）")]),s._v(" "),a("p",[a("code",[s._v("代表")]),s._v("：masonry框架。")]),s._v(" "),a("p",[a("code",[s._v("实现")]),s._v("：模仿masonry，写一个加法计算器，练习链式编程思想。")]),s._v(" "),a("p",[s._v("NSObject+Caculator.h")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# import <Foundation/Foundation.h>\n\n@class CaculatorMaker;\n\n@interface NSObject (Caculator)\n\n// 计算\n+ (int)makeCaculators:(void (^)(CaculatorMaker *))block;\n                       \n@end\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("NSObject+Caculator.m")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("@implementation NSObject (Caculator)\n\n+ (int)makeCaculators:(void (^)(CaculatorMaker *))block {\n    \n    CaculatorMaker *mgr = [[CaculatorMaker alloc] init];\n    \n    block(mgr);\n    \n    return (mgr.result);\n}\n\n@end\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("CaculatorMaker.h")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# import <Foundation/Foundation.h>\n\n@class CaculatorMaker;\n\ntypedef CaculatorMaker *(^CasulatorBlock)(int);\n\n@interface CaculatorMaker : NSObject\n\n@property (nonatomic, assign) int result;\n\n// 算数方法\n- (CaculatorMaker *(^)(int))add;\n- (CasulatorBlock)sub;\n- (CasulatorBlock)muilt;\n- (CasulatorBlock)divide;\n\n\n@end\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("p",[s._v("CaculatorMaker.m")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# import "CaculatorMaker.h"\n\n@implementation CaculatorMaker\n\n- (CaculatorMaker *(^)(int))add {\n\n    return ^CaculatorMaker *(int value) {\n        \n        _result += value;\n        \n        return self;\n    };\n}\n\n- (CasulatorBlock)sub {\n    \n    return ^CaculatorMaker *(int value) {\n        \n        _result -= value;\n        \n        return self;\n    };\n}\n\n- (CasulatorBlock)muilt {\n\n    return ^CaculatorMaker *(int value) {\n        \n        _result *= value;\n        \n        return self;\n    };\n}\n\n- (CasulatorBlock)divide {\n    \n    return ^CaculatorMaker *(int value) {\n        \n        _result /= value;\n        \n        return self;\n    };\n}\n\n@end\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br")])]),a("p",[s._v("使用：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('int result = [NSObject makeCaculators:^(CaculatorMaker *make) {\n        \n        // ( 1 + 2 - 5 ) * (-4) / 4\n        make.add(1).add(2).sub(5).muilt(-4).divide(4);\n\n    }];\n    \n    NSLog(@"%d", result);\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h4",{attrs:{id:"函数式编程思想"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#函数式编程思想"}},[s._v("#")]),s._v(" 函数式编程思想")]),s._v(" "),a("p",[a("strong",[s._v("函数式编程思想")]),s._v("：是把操作尽量写成一系列嵌套的函数或者方法调用。")]),s._v(" "),a("p",[a("code",[s._v("特点")]),s._v("：每个方法必须有返回值（本身对象）,把函数或者Block当做参数,block参数（需要操作的值）block返回值（操作结果）")]),s._v(" "),a("p",[a("code",[s._v("代表")]),s._v("："),a("strong",[s._v("ReactiveCocoa")])]),s._v(" "),a("p",[a("code",[s._v("实现")]),s._v("：用函数式编程实现，写一个加法计算器,并且加法计算器自带判断是否等于某个值.")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('    Calculator *caculator = [[Calculator alloc] init];\n    \n    BOOL isqule = [[[caculator caculator:^int(int result) {\n        \n        result += 2;\n        result *= 5;\n        return result;\n        \n    }] equle:^BOOL(int result) {\n        \n        return result == 10;\n        \n    }] isEqule];\n    \n    NSLog(@"%d", isqule);\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("Calculator.h")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#import <Foundation/Foundation.h>\n\n@interface Calculator : NSObject\n\n@property (nonatomic, assign) BOOL isEqule;\n\n@property (nonatomic, assign) int result;\n\n- (Calculator *)caculator:(int (^)(int result))caculator;\n\n- (Calculator *)equle:(BOOL (^)(int result))operation;\n\n@end\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("Calculator.m")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('#import "Calculator.h"\n\n@implementation Calculator\n\n- (Calculator *)caculator:(int (^)(int))caculator {\n\n    _result = caculator(_result);\n    \n    return self;\n    \n}\n\n\n- (Calculator *)equle:(BOOL (^)(int))operation {\n\n    _isEqule = operation(_result);\n    \n    return self;\n}\n\n@end\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("p",[a("strong",[s._v("ReactiveCocoa")]),s._v(" 结合了这两种种编程风格：")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("函数式编程")]),s._v("（Functional Programming）")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("响应式编程")]),s._v("（Reactive Programming）")])])]),s._v(" "),a("p",[s._v("所以，你可能听说过 "),a("strong",[s._v("ReactiveCocoa")]),s._v(" 被描述为函数响应式编程（FRP）框架。")]),s._v(" "),a("p",[s._v("以后使用RAC解决问题，就不需要考虑调用顺序，直接考虑结果，把每一次操作都写成一系列嵌套的方法中，使代码高聚合，方便管理。")]),s._v(" "),a("h1",{attrs:{id:"导入reactivecocoa"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导入reactivecocoa"}},[s._v("#")]),s._v(" 导入ReactiveCocoa")]),s._v(" "),a("hr"),s._v(" "),a("blockquote",[a("p",[s._v("ReactiveCocoa的"),a("a",{attrs:{href:"https://github.com/ReactiveCocoa/ReactiveCocoa",target:"_blank",rel:"noopener noreferrer"}},[s._v("GitHub地址"),a("OutboundLink")],1)])]),s._v(" "),a("h4",{attrs:{id:"objective-c"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#objective-c"}},[s._v("#")]),s._v(" Objective-C")]),s._v(" "),a("p",[a("strong",[s._v("ReactiveCocoa 2.5")]),s._v("版本以后改用了"),a("strong",[s._v("Swift")]),s._v("，所以"),a("strong",[s._v("Objective-C")]),s._v("项目需要导入"),a("strong",[s._v("2.5版本")])]),s._v(" "),a("p",[a("code",[s._v("CocoaPods")]),s._v("集成：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("platform :ios, '8.0'\n\ntarget 'YouProjectName' do\n\nuse_frameworks!\npod 'ReactiveCocoa', '~> 2.5'\n\nend\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("PS:新版本的"),a("code",[s._v("CocoaPods")]),s._v("需要加入")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("target 'YouProjectName' do \n... \nend\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("这句话来限定项目，否则导入失败。")]),s._v(" "),a("h4",{attrs:{id:"swift"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#swift"}},[s._v("#")]),s._v(" Swift")]),s._v(" "),a("p",[a("strong",[s._v("Swift")]),s._v("项目导入2.5后的版本")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("platform :ios, '8.0'\n\ntarget 'YouProjectName' do\n\nuse_frameworks!\npod 'ReactiveCocoa'\n\nend\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("使用时在"),a("a",{attrs:{href:"http://www.jianshu.com/p/587b83b6665c",target:"_blank",rel:"noopener noreferrer"}},[s._v("全局头文件"),a("OutboundLink")],1),s._v("导入头文件即可")]),s._v(" "),a("p",[a("code",[s._v("PrefixHeader.pch")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#ifndef PrefixHeader_pch\n#define PrefixHeader_pch\n\n#import <ReactiveCocoa/ReactiveCocoa.h>\n\n#endif\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h1",{attrs:{id:"reactivecocoa常见类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reactivecocoa常见类"}},[s._v("#")]),s._v(" ReactiveCocoa常见类")]),s._v(" "),a("h4",{attrs:{id:"racsiganl-信号类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#racsiganl-信号类"}},[s._v("#")]),s._v(" RACSiganl 信号类")]),s._v(" "),a("blockquote",[a("p",[s._v("信号类,一般表示将来有数据传递，只要有数据改变，信号内部接收到数据，就会马上发出数据。")])]),s._v(" "),a("p",[s._v("注意：")]),s._v(" "),a("ul",[a("li",[s._v("信号类(RACSiganl)，只是表示当数据改变时，信号内部会发出数据，它本身不具备发送信号的能力，而是交给内部一个订阅者去发出。")]),s._v(" "),a("li",[s._v("默认一个信号都是冷信号，也就是值改变了，也不会触发，只有订阅了这个信号，这个信号才会变为热信号，值改变了才会触发。")]),s._v(" "),a("li",[s._v("如何订阅信号：调用信号RACSignal的subscribeNext就能订阅")])]),s._v(" "),a("p",[s._v("使用：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// RACSignal使用步骤：\n    // 1.创建信号 + (RACSignal *)createSignal:(RACDisposable * (^)(id<RACSubscriber> subscriber))didSubscribe\n    // 2.订阅信号,才会激活信号. - (RACDisposable *)subscribeNext:(void (^)(id x))nextBlock\n    // 3.发送信号 - (void)sendNext:(id)value\n\n\n    // RACSignal底层实现：\n    // 1.创建信号，首先把didSubscribe保存到信号中，还不会触发。\n    // 2.当信号被订阅，也就是调用signal的subscribeNext:nextBlock\n    // 2.2 subscribeNext内部会创建订阅者subscriber，并且把nextBlock保存到subscriber中。\n    // 2.1 subscribeNext内部会调用siganl的didSubscribe\n    // 3.siganl的didSubscribe中调用[subscriber sendNext:@1];\n    // 3.1 sendNext底层其实就是执行subscriber的nextBlock\n\n    // 1.创建信号\n    RACSignal *siganl = [RACSignal createSignal:^RACDisposable *(id<RACSubscriber> subscriber) {\n\n        // block调用时刻：每当有订阅者订阅信号，就会调用block。\n\n        // 2.发送信号\n        [subscriber sendNext:@1];\n\n        // 如果不在发送数据，最好发送信号完成，内部会自动调用[RACDisposable disposable]取消订阅信号。\n        [subscriber sendCompleted];\n\n        return [RACDisposable disposableWithBlock:^{\n\n            // block调用时刻：当信号发送完成或者发送错误，就会自动执行这个block,取消订阅信号。\n\n            // 执行完Block后，当前信号就不在被订阅了。\n\n            NSLog(@"信号被销毁");\n\n        }];\n    }];\n\n    // 3.订阅信号,才会激活信号.\n    [siganl subscribeNext:^(id x) {\n        // block调用时刻：每当有信号发出数据，就会调用block.\n        NSLog(@"接收到数据:%@",x);\n    }];\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br")])]),a("h4",{attrs:{id:"racsubscriber"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#racsubscriber"}},[s._v("#")]),s._v(" RACSubscriber")]),s._v(" "),a("blockquote",[a("p",[s._v("表示订阅者的意思，用于发送信号，这是一个协议，不是一个类，只要遵守这个协议，并且实现方法才能成为订阅者。通过create创建的信号，都有一个订阅者，帮助他发送数据。")])]),s._v(" "),a("h4",{attrs:{id:"racdisposable"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#racdisposable"}},[s._v("#")]),s._v(" RACDisposable")]),s._v(" "),a("blockquote",[a("p",[s._v("用于取消订阅或者清理资源，当信号发送完成或者发送错误的时候，就会自动触发它。")])]),s._v(" "),a("p",[a("strong",[s._v("使用场景")]),s._v("：不想监听某个信号时，可以通过它主动取消订阅信号。")]),s._v(" "),a("h4",{attrs:{id:"racsubject"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#racsubject"}},[s._v("#")]),s._v(" RACSubject")]),s._v(" "),a("blockquote",[a("p",[s._v("RACSubject:信号提供者，自己可以充当信号，又能发送信号。")])]),s._v(" "),a("p",[a("strong",[s._v("使用场景")]),s._v(":通常用来代替代理，有了它，就不必要定义代理了。")]),s._v(" "),a("h4",{attrs:{id:"racreplaysubject"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#racreplaysubject"}},[s._v("#")]),s._v(" "),a("strong",[s._v("RACReplaySubject")])]),s._v(" "),a("blockquote",[a("p",[s._v("重复提供信号类，RACSubject的子类。")])]),s._v(" "),a("p",[a("code",[s._v("RACReplaySubject")]),s._v("与"),a("code",[s._v("RACSubject")]),s._v("区别:")]),s._v(" "),a("p",[a("code",[s._v("RACReplaySubject")]),s._v("可以先发送信号，在订阅信号，"),a("code",[s._v("RACSubject")]),s._v("就不可以。")]),s._v(" "),a("p",[a("strong",[s._v("使用场景一")]),s._v(":如果一个信号每被订阅一次，就需要把之前的值重复发送一遍，使用重复提供信号类。")]),s._v(" "),a("p",[a("strong",[s._v("使用场景二")]),s._v(":可以设置capacity数量来限制缓存的value的数量,即只缓充最新的几个值。")]),s._v(" "),a("p",[a("strong",[s._v("ACSubject")]),s._v(" 和 "),a("strong",[s._v("RACReplaySubject")]),s._v(" 简单使用：")]),s._v(" "),a("p",[a("strong",[s._v("ACSubject")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('    // RACSubject使用步骤\n   // 1.创建信号 [RACSubject subject]，跟RACSiganl不一样，创建信号时没有block。\n   // 2.订阅信号 - (RACDisposable *)subscribeNext:(void (^)(id x))nextBlock\n   // 3.发送信号 sendNext:(id)value\n   \n   // RACSubject:底层实现和RACSignal不一样。\n   // 1.调用subscribeNext订阅信号，只是把订阅者保存起来，并且订阅者的nextBlock已经赋值了。\n   // 2.调用sendNext发送信号，遍历刚刚保存的所有订阅者，一个一个调用订阅者的nextBlock。\n   \n   \n   // 1. 创建信号\n   RACSubject *subject = [RACSubject subject];\n   \n   // 2.订阅信号\n   [subject subscribeNext:^(id x) {\n      \n       // block调用时机：当信号发出新值，就会调用\n       NSLog(@"收到信号");\n       \n   }];\n   \n   // 3.发送信号\n   NSLog(@"发送信号");\n   [subject sendNext:@"1"];\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('    // RACReplaySubject使用步骤:\n   // 1.创建信号 [RACSubject subject]，跟RACSiganl不一样，创建信号时没有block。\n   // 2.可以先订阅信号，也可以先发送信号。\n   // 2.1 订阅信号 - (RACDisposable *)subscribeNext:(void (^)(id x))nextBlock\n   // 2.2 发送信号 sendNext:(id)value\n   \n   // RACReplaySubject:底层实现和RACSubject不一样。\n   // 1.调用sendNext发送信号，把值保存起来，然后遍历刚刚保存的所有订阅者，一个一个调用订阅者的nextBlock。\n   // 2.调用subscribeNext订阅信号，遍历保存的所有值，一个一个调用订阅者的nextBlock\n   \n   // 如果想当一个信号被订阅，就重复播放之前所有值，需要先发送信号，在订阅信号。\n   // 也就是先保存值，在订阅值。\n   \n   \n   // 1.创建信号\n   RACReplaySubject *replaySubject = [RACReplaySubject subject];\n   \n\n   \n   // 3.先订阅信号\n   [replaySubject subscribeNext:^(id x) {\n       \n       NSLog(@"第一个订阅者接受到的数据%@", x);\n   }];\n   \n   // 2.发送信号\n   [replaySubject sendNext:@1];\n   [replaySubject sendNext:@2];\n   \n   // 后订阅信号\n   [replaySubject subscribeNext:^(id x) {\n       \n       NSLog(@"第二个订阅者接收到的数据%@",x);\n   }];\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br")])]),a("p",[a("strong",[s._v("RACSubject")]),s._v("替换代理（与block类似）")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// 需求:\n    // 1.给当前控制器添加一个按钮，modal到另一个控制器界面\n    // 2.另一个控制器view中有个按钮，点击按钮，通知当前控制器\n\n步骤一：在第二个控制器.h，添加一个RACSubject代替代理。\n@interface TwoViewController : UIViewController\n\n@property (nonatomic, strong) RACSubject *delegateSignal;\n\n@end\n\n步骤二：监听第二个控制器按钮点击\n@implementation TwoViewController\n- (IBAction)notice:(id)sender {\n    // 通知第一个控制器，告诉它，按钮被点了\n\n     // 通知代理\n     // 判断代理信号是否有值\n    if (self.delegateSignal) {\n        // 有值，才需要通知\n        [self.delegateSignal sendNext:nil];\n    }\n}\n@end\n\n步骤三：在第一个控制器中，监听跳转按钮，给第二个控制器的代理信号赋值，并且监听.\n@implementation OneViewController \n- (IBAction)btnClick:(id)sender {\n\n    // 创建第二个控制器\n    TwoViewController *twoVc = [[TwoViewController alloc] init];\n\n    // 设置代理信号\n    twoVc.delegateSignal = [RACSubject subject];\n\n    // 订阅代理信号\n    [twoVc.delegateSignal subscribeNext:^(id x) {\n\n        NSLog(@"点击了通知按钮 %@", x);\n    }];\n\n    // 跳转到第二个控制器\n    [self presentViewController:twoVc animated:YES completion:@"hi"];\n\n}\n@end\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br")])]),a("h4",{attrs:{id:"ractuple"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ractuple"}},[s._v("#")]),s._v(" RACTuple")]),s._v(" "),a("blockquote",[a("p",[s._v("元组类,类似NSArray,用来包装值.("),a("code",[s._v("@[key, value]")]),s._v(")")])]),s._v(" "),a("h4",{attrs:{id:"racsequence"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#racsequence"}},[s._v("#")]),s._v(" RACSequence")]),s._v(" "),a("blockquote",[a("p",[s._v("RAC中的集合类，用于代替NSArray,NSDictionary,可以使用它来快速遍历数组和字典。")])]),s._v(" "),a("p",[s._v("使用场景：字典转模型")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('    // 1.遍历数组\n    NSArray *numbers = @[@1,@2,@3,@4];\n    \n    // 这里其实是三步\n    // 第一步: 把数组转换成集合RACSequence numbers.rac_sequence\n    // 第二步: 把集合RACSequence转换RACSignal信号类,numbers.rac_sequence.signal\n    // 第三步: 订阅信号，激活信号，会自动把集合中的所有值，遍历出来。\n    \n    [numbers.rac_sequence.signal subscribeNext:^(id x) {\n        \n        NSLog(@"%@", x);\n    }];\n    \n    \n    \n    // 2.遍历字典,遍历出来的键值对 都会包装成 RACTuple(元组对象) @[key, value]\n    NSDictionary *dic = @{@"name": @"BYqiu", @"age": @18};\n    \n    [dic.rac_sequence.signal subscribeNext:^(RACTuple *x) {\n        \n        // 解元组包，会把元组的值，按顺序给参数里的变量赋值\n        // 写法相当与\n        // NSString *key = x[0];\n        // NSString *value = x[1];\n        RACTupleUnpack(NSString *key, NSString *value) = x;\n        \n        NSLog(@"key:%@, value:%@", key, value);\n        \n    }];\n    \n    // 3.字典转模型\n    \n    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"flags.plist" ofType:nil];\n    \n    NSArray *dicArray = [NSArray arrayWithContentsOfFile:filePath];\n    \n    NSMutableArray *items = [NSMutableArray array];\n    \n    // OC写法\n    for (NSDictionary *dic in dicArray) {\n        \n        //FlagItem *item = [FlagItem flagWithDict:dict];\n        //[items addObject:item];\n    }\n    \n    \n    // RAC写法\n    [dicArray.rac_sequence.signal subscribeNext:^(id x) {\n        // 利用RAC遍历， x：字典\n        \n        //FlagItem *item = [FlagItem flagWithDict:x];\n        //[items addObject:item];\n    }];\n    \n    // RAC高级用法（函数式编程）\n    NSArray *flags = [[dicArray.rac_sequence map:^id(id value) {\n        \n        return  [FlagItem flagWithDict:value];\n        \n    }] array];\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br")])]),a("h4",{attrs:{id:"raccommand"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#raccommand"}},[s._v("#")]),s._v(" RACCommand")]),s._v(" "),a("blockquote",[a("p",[s._v("RAC中用于处理事件的类，可以把事件如何处理,事件中的数据如何传递，包装到这个类中，他可以很方便的监控事件的执行过程。")])]),s._v(" "),a("p",[s._v("一、RACCommand使用步骤:")]),s._v(" "),a("ol",[a("li",[s._v("创建命令 initWithSignalBlock:(RACSignal * (^)(id input))signalBlock")]),s._v(" "),a("li",[s._v("在signalBlock中，创建RACSignal，并且作为signalBlock的返回值")]),s._v(" "),a("li",[s._v("执行命令 - (RACSignal *)execute:(id)input")])]),s._v(" "),a("p",[s._v("二、RACCommand使用注意:")]),s._v(" "),a("ol",[a("li",[s._v("signalBlock必须要返回一个信号，不能传nil.")]),s._v(" "),a("li",[s._v("如果不想要传递信号，直接创建空的信号[RACSignal empty];")]),s._v(" "),a("li",[s._v("RACCommand中信号如果数据传递完，必须调用[subscriber sendCompleted]，这时命令才会执行完毕，否则永远处于执行中。")]),s._v(" "),a("li",[s._v("RACCommand需要被强引用，否则接收不到RACCommand中的信号，因此RACCommand中的信号是延迟发送的。")])]),s._v(" "),a("p",[s._v("三、RACCommand设计思想：")]),s._v(" "),a("p",[s._v("内部signalBlock为什么要返回一个信号，这个信号有什么用。")]),s._v(" "),a("ol",[a("li",[s._v("在RAC开发中，通常会把网络请求封装到RACCommand，直接执行某个RACCommand就能发送请求。")]),s._v(" "),a("li",[s._v("当RACCommand内部请求到数据的时候，需要把请求的数据传递给外界，这时候就需要通过signalBlock返回的信号传递了。")])]),s._v(" "),a("p",[s._v("四、如何拿到RACCommand中返回信号发出的数据。")]),s._v(" "),a("ol",[a("li",[s._v("RACCommand有个执行信号源executionSignals，这个是signal of signals(信号的信号),意思是信号发出的数据是信号，不是普通的类型。")]),s._v(" "),a("li",[s._v("订阅executionSignals就能拿到RACCommand中返回的信号，然后订阅signalBlock返回的信号，就能获取发出的值。")])]),s._v(" "),a("p",[s._v("五、监听当前命令是否正在执行executing")]),s._v(" "),a("p",[s._v("六、使用场景,监听按钮点击，网络请求")]),s._v(" "),a("p",[s._v("使用:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// 1.创建命令\n    RACCommand *command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) {\n        NSLog(@"执行命令");\n        \n        // 返回空信号\n        //return [RACSignal empty];\n        \n        // 2.创建信号 传递数据\n        return [RACSignal createSignal:^RACDisposable *(id<RACSubscriber> subscriber) {\n            \n            [subscriber sendNext:@"请求数据"];\n            \n            // 注意：数据传递完，最好调用sendCompleted,这时命令才执行完毕\n            [subscriber sendCompleted];\n            \n            return nil;\n        }];\n    }];\n    \n    // 强引用命令，不要被销毁，否则接收不到数据\n    _command = command;\n    \n    // 3.订阅RACCommand的信号\n    [command.executionSignals subscribeNext:^(id x) {\n        [x subscribeNext:^(id x) {\n            \n            NSLog(@"订阅RACCommand的信号: %@", x);\n        }];\n    }];\n\n    // RAC高级用法\n    // switchToLatest:用于signal of signals，获取signal of signals发出的最新信号,也就是可以直接拿到RACCommand中的信号\n    [command.executionSignals.switchToLatest subscribeNext:^(id x) {\n       \n        NSLog(@"RAC高级用法: %@", x);\n    }];\n    \n    // 4.监听命令是否执行完毕,默认会来一次，可以直接跳过，skip表示跳过第一次信号。\n    [[command.executing skip:1] subscribeNext:^(id x) {\n       \n        if ([x boolValue] == YES) {\n            \n            // 正在执行\n            NSLog(@"正在执行");\n            \n        } else {\n            \n            // 执行完毕\n            NSLog(@"执行完成");\n        }\n    }];\n    \n    // 5.执行命名\n    [self.command execute:@1];\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br")])]),a("h4",{attrs:{id:"racmulticastconnection"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#racmulticastconnection"}},[s._v("#")]),s._v(" RACMulticastConnection")]),s._v(" "),a("blockquote",[a("p",[s._v("用于当一个信号，被多次订阅时，为了保证创建信号时，避免多次调用创建信号中的block，造成副作用，可以使用这个类处理。")])]),s._v(" "),a("p",[s._v("注意：RACMulticastConnection通过RACSignal的-publish或者-muticast:方法创建.")]),s._v(" "),a("p",[s._v("RACMulticastConnection使用步骤:")]),s._v(" "),a("ol",[a("li",[s._v("创建信号 + (RACSignal *)createSignal:(RACDisposable * (^)(id"),a("RACSubscriber",[s._v(" subscriber))didSubscribe")])],1),s._v(" "),a("li",[s._v("创建连接 RACMulticastConnection *connect = [signal publish];")]),s._v(" "),a("li",[s._v("订阅信号,注意：订阅的不在是之前的信号，而是连接的信号。 [connect.signal subscribeNext:nextBlock]")]),s._v(" "),a("li",[s._v("连接 [connect connect]")])]),s._v(" "),a("p",[s._v("RACMulticastConnection底层原理:")]),s._v(" "),a("ol",[a("li",[s._v("创建connect，connect.sourceSignal -> RACSignal(原始信号)  connect.signal -> RACSubject")]),s._v(" "),a("li",[s._v("订阅connect.signal，会调用RACSubject的subscribeNext，创建订阅者，而且把订阅者保存起来，不会执行block。")]),s._v(" "),a("li",[s._v("[connect connect]内部会订阅RACSignal(原始信号)，并且订阅者是RACSubject\n"),a("ol",[a("li",[s._v("订阅原始信号，就会调用原始信号中的didSubscribe")]),s._v(" "),a("li",[s._v("didSubscribe，拿到订阅者调用sendNext，其实是调用RACSubject的sendNext")])])]),s._v(" "),a("li",[s._v("RACSubject的sendNext,会遍历RACSubject所有订阅者发送信号。\n"),a("ul",[a("li",[s._v("因为刚刚第二步，都是在订阅RACSubject，因此会拿到第二步所有的订阅者，调用他们的nextBlock")])])])]),s._v(" "),a("p",[s._v("需求：假设在一个信号中发送请求，每次订阅一次都会发送请求，这样就会导致多次请求。")]),s._v(" "),a("p",[s._v("解决：使用RACMulticastConnection就能解决.")]),s._v(" "),a("p",[s._v("问题：每次订阅一次都会发送请求")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// 创建请求信号\nRACSignal *signal = [RACSignal createSignal:^RACDisposable *(id<RACSubscriber> subscriber) {\n    \n    NSLog(@"发送请求");\n    [subscriber sendNext:@1];\n    \n    return nil;\n}];\n\n// 订阅信号\n[signal subscribeNext:^(id x) {\n    \n    NSLog(@"接受数据: %@", x);\n}];\n\n// 再次订阅信号，会再次执行发送请求，也就是每次订阅都会发送一次请求\n[signal subscribeNext:^(id x) {\n    \n    NSLog(@"接受数据: %@", x);\n}];\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("p",[s._v("输出：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("2016-12-28 11:37:04.397 ReactiveCacoa[1505:340573] 发送请求\n2016-12-28 11:37:04.398 ReactiveCacoa[1505:340573] 接受数据: 1\n2016-12-28 11:37:04.398 ReactiveCacoa[1505:340573] 发送请求\n2016-12-28 11:37:04.398 ReactiveCacoa[1505:340573] 接受数据: 1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("可以发现每次订阅都会重新发送请求.")]),s._v(" "),a("p",[s._v("下面我们使用RACMulticastConnection：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('RACSignal *signal = [RACSignal createSignal:^RACDisposable *(id<RACSubscriber> subscriber) {\n    \n    NSLog(@"发送请求");\n    [subscriber sendNext:@1];\n    \n    return nil;\n}];\n\n// 创建连接\nRACMulticastConnection *connect = [signal publish];\n\n// 订阅信号\n// 注意：订阅信号，也不能激活信号，只是保存订阅者到数组，必须通过连接，当调用连接，就会一次性调用所有订阅者的SendNext\n[connect.signal subscribeNext:^(id x) {\n    \n    NSLog(@"订阅者1信号: %@", x);\n}];\n\n[connect.signal subscribeNext:^(id x) {\n    \n    NSLog(@"订阅者2信号: %@", x);\n}];\n\n// 连接、激活信号\n[connect connect];\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br")])]),a("p",[s._v("输出：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("2016-12-28 11:37:04.399 ReactiveCacoa[1505:340573] 发送请求\n2016-12-28 11:37:04.399 ReactiveCacoa[1505:340573] 订阅者1信号: 1\n2016-12-28 11:37:04.399 ReactiveCacoa[1505:340573] 订阅者2信号: 1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h4",{attrs:{id:"racscheduler"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#racscheduler"}},[s._v("#")]),s._v(" RACScheduler")]),s._v(" "),a("blockquote",[a("p",[s._v("RAC中的队列，用GCD封装的。")])]),s._v(" "),a("h4",{attrs:{id:"racunit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#racunit"}},[s._v("#")]),s._v(" RACUnit")]),s._v(" "),a("blockquote",[a("p",[s._v("表⽰stream不包含有意义的值,也就是看到这个，可以直接理解为nil.")])]),s._v(" "),a("h4",{attrs:{id:"raceven"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#raceven"}},[s._v("#")]),s._v(" RACEven")]),s._v(" "),a("blockquote",[a("p",[s._v("把数据包装成信号事件(signal event)。它主要通过RACSignal的-materialize来使用，然并卵。")])]),s._v(" "),a("h1",{attrs:{id:"reactivecocoa开发中常见用法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reactivecocoa开发中常见用法"}},[s._v("#")]),s._v(" ReactiveCocoa开发中常见用法")]),s._v(" "),a("ol",[a("li",[s._v("替换代理")]),s._v(" "),a("li",[s._v("替换KVO")]),s._v(" "),a("li",[s._v("监听事件")]),s._v(" "),a("li",[s._v("替换通知")]),s._v(" "),a("li",[s._v("监听文本框文字改变")]),s._v(" "),a("li",[s._v("统一处理多个网络请求")])]),s._v(" "),a("h4",{attrs:{id:"替换代理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#替换代理"}},[s._v("#")]),s._v(" 替换代理：")]),s._v(" "),a("p",[a("strong",[s._v("rac_signalForSelector:")])]),s._v(" "),a("p",[a("code",[s._v("rac_signalForSelector:")]),s._v(" 直接监听 "),a("code",[s._v("Selector")]),s._v(" 事件的调用")]),s._v(" "),a("p",[s._v("应用场景：监听 "),a("code",[s._v("RedViewController")]),s._v(" 中按钮的点击事件 "),a("code",[s._v("btnTap:")])]),s._v(" "),a("p",[s._v("跳转到"),a("code",[s._v("RedViewController")]),s._v("前，先使用"),a("code",[s._v("rac_signalForSelector")]),s._v("订阅rvc中的 "),a("code",[s._v("btnTap:")]),s._v(" 点击事件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// 使用segue跳转\n- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {\n- \n    if ([segue.identifier isEqualToString:@"goRedVC"]) {\n        \n        RedViewController *rvc = segue.destinationViewController;\n        \n        // 订阅rvc中的 btnTap: 点击事件\n        [[rvc rac_signalForSelector:@selector(btnTap:)] subscribeNext:^(id x) {\n        \n            NSLog(@"RedVC btnTap！");\n        }];\n    }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[a("code",[s._v("RedViewController.m")]),s._v(" 中的按钮事件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('- (IBAction)btnTap:(id)sender {\n    \n    NSLog(@"!");\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"替换kvo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#替换kvo"}},[s._v("#")]),s._v(" 替换KVO")]),s._v(" "),a("p",[a("strong",[s._v("rac_valuesForKeyPath:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// KVO\n// 监听 slider 的 value 变化\n[[self.slider rac_valuesForKeyPath:@"value" observer:nil] subscribeNext:^(id x) {\n\n    NSLog(@"slider value Change：%@", x);\n}];\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h4",{attrs:{id:"替换通知"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#替换通知"}},[s._v("#")]),s._v(" 替换通知")]),s._v(" "),a("p",[a("strong",[s._v("rac_addObserverForName")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// 原生的订阅通知\n[[NSNotificationCenter defaultCenter] addObserver:self\n                                         selector:@selector(userDidChange:)\n                                             name:kTTCurrentUserLoggedOffNotification\n                                           object:nil];\n                                           \n// 使用RAC订阅通知 ，takeUntil限定信号的声明周期                                  \n[[[[NSNotificationCenter defaultCenter] rac_addObserverForName:UIApplicationDidEnterBackgroundNotification object:nil]\n  takeUntil:[self rac_willDeallocSignal]]\n  subscribeNext:^(id x) {\n     NSLog(@"Notification received");\n}];\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h4",{attrs:{id:"监听事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#监听事件"}},[s._v("#")]),s._v(" 监听事件")]),s._v(" "),a("p",[a("strong",[s._v("rac_signalForControlEvents:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// 监听 btn 的 UIControlEventTouchUpInside 点击事件\n[[self.btn rac_signalForControlEvents:UIControlEventTouchUpInside] subscribeNext:^(id x) {\n    \n    NSLog(@"btnTap");\n}];\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h4",{attrs:{id:"监听-textfield-文字变化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#监听-textfield-文字变化"}},[s._v("#")]),s._v(" 监听 textField 文字变化")]),s._v(" "),a("p",[a("strong",[s._v("rac_textSignal")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[[self.textField rac_textSignal] subscribeNext:^(id x) {\n        \n\tNSLog(@"textField change: %@", x);\n}];\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"统一处理多个网络请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#统一处理多个网络请求"}},[s._v("#")]),s._v(" 统一处理多个网络请求")]),s._v(" "),a("p",[a("strong",[s._v("rac_liftSelector:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('- (void)viewDidLoad {\n    [super viewDidLoad];\n    \n\t// 处理多个请求都返回结果的时候，统一处理\n    // 如同时进行多个网络请求，每个请求都正确返回时，再去刷新页面\n    \n    RACSignal *signalOne = [RACSignal createSignal:^RACDisposable *(id<RACSubscriber> subscriber) {\n        \n        // 网络请求1\n        // ...\n        \n        // 返回成功\n        [subscriber sendNext:@"网络请求1 data"];\n        \n        return nil;\n    }];\n    \n    RACSignal *signalTwo = [RACSignal createSignal:^RACDisposable *(id<RACSubscriber> subscriber) {\n        \n        // 网络请求2\n        // ...\n        \n        // 返回成功\n        [subscriber sendNext:@"网络请求2 data"];\n        \n        return nil;\n    }];\n    \n    [self rac_liftSelector:@selector(updateWithR1:R2:) withSignalsFromArray:@[signalOne, signalTwo]];\n    \n}\n\n// 更新界面\n- (void)updateWithR1:(id)r1 R2:(id)r2 {\n\n    NSLog(@"R1:%@, R2：%@ 完成！", r1, r2);\n    \n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br")])]),a("h4",{attrs:{id:"注意"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意"}},[s._v("#")]),s._v(" "),a("strong",[s._v("注意")]),s._v("：")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("替换KVO")]),s._v("和 "),a("code",[s._v("监听文本框文字改变")]),s._v(" 方法在创建监听方法时就会执行一次。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code")]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"})])])]),s._v(" "),a("p",[s._v("2016-12-28 16:53:50.746 ReactiveCacoa[4956:1246592] slider value Change：0.5\n2016-12-28 16:53:50.748 ReactiveCacoa[4956:1246592] textField change:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\n- 使用`rac_liftSelector`时 `@selector(updateWithR1:R2:) `中的方 **参数个数** 要与 **signal个数** 相同，否则会被断言Crash！\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);