(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{559:function(t,a,s){"use strict";s.r(a);var e=s(6),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("Xcode 8.2 | Swift 3.0")])]),t._v(" "),s("p",[t._v("在iOS开发中，无论是 "),s("strong",[t._v("Objective-C")]),t._v(" 还是 "),s("strong",[t._v("Swift")]),t._v(" ，"),s("strong",[t._v("Delegate")]),t._v(" 有着具足轻重的位置，如"),s("code",[t._v("TabelViewDelegate")]),t._v(" 与 "),s("code",[t._v("TableViewDataSource")]),t._v("。")]),t._v(" "),s("p",[s("strong",[t._v("Swift")]),t._v(" 中的代理模式 和 "),s("strong",[t._v("Objective-C")]),t._v(" 除了语法外，几乎一样。")]),t._v(" "),s("h2",{attrs:{id:"objective-c-代理模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#objective-c-代理模式"}},[t._v("#")]),t._v(" Objective-C 代理模式")]),t._v(" "),s("p",[t._v("在介绍 Swift 代理模式前，先来看回顾一下 Objective-C 中的代理模式如何实现")]),t._v(" "),s("p",[t._v("Objective-C 中用代理实现反向传值：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://ww4.sinaimg.cn/large/006tKfTcgy1fdd51zf5cwg307i0dck3f.gif",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"委托方-子控制器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#委托方-子控制器"}},[t._v("#")]),t._v(" 委托方（子控制器）")]),t._v(" "),s("p",[t._v("委托方需要实现")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("创建协议 、声明协议方法")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("  @protocol SubViewDelegate <NSObject>\n  \n  - (void)backWithStr:(NSString *) str;\n\n  @end\n")])])])]),t._v(" "),s("li",[s("p",[t._v("创建一个代理属性")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("  // weak声明\n  @property (nonatomic, weak) id<SubViewDelegate> delegate;\n")])])])]),t._v(" "),s("li",[s("p",[t._v("执行协议方法")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("  // 判断代理是实现该方法，避免carsh\n  if ([self.delegate respondsToSelector:@selector(backWithStr:)]) {\n   \t[self.delegate backWithStr:self.textField.text];\n   }\n")])])])])]),t._v(" "),s("h4",{attrs:{id:"代理方-主控制器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代理方-主控制器"}},[t._v("#")]),t._v(" 代理方（主控制器）")]),t._v(" "),s("p",[t._v("代理方需要实现")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("遵守（继承）协议")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("  @interface ViewController () <SubViewDelegate>\n")])])])]),t._v(" "),s("li",[s("p",[t._v("将代理设为自己")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("  subVC.delegate = self;\n")])])])]),t._v(" "),s("li",[s("p",[t._v("实现代理方法")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("  - (void)backWithStr:(NSString *)str {\n  \tself.label.text = str;\n  }\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"swift-代理模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#swift-代理模式"}},[t._v("#")]),t._v(" Swift 代理模式")]),t._v(" "),s("p",[t._v("Swift 代理模式 与 Objective-C 一样，只是语法不同。")]),t._v(" "),s("p",[t._v("Swift 中用代理实现反向传值：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://ww1.sinaimg.cn/large/006tKfTcgy1fdd5oi9048g307i0dc7co.gif",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"委托方-子控制器-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#委托方-子控制器-2"}},[t._v("#")]),t._v(" 委托方（子控制器）")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("创建协议 、声明协议方法")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("  protocol SubViewDelegate {\n  func backStr(str: String)\n  }\t\n")])])])]),t._v(" "),s("li",[s("p",[t._v("创建一个代理属性")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("  var delegate: SubViewDelegate?\n")])])])]),t._v(" "),s("li",[s("p",[t._v("执行协议方法")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v('  /// 执行代理方法，将值回传\n  delegate?.backStr(str: textField.text ?? "")\n')])])])])]),t._v(" "),s("h4",{attrs:{id:"代理方-主控制器-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代理方-主控制器-2"}},[t._v("#")]),t._v(" 代理方(主控制器)")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("继承协议")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("  class ViewController: UIViewController, SubViewDelegate\n")])])])]),t._v(" "),s("li",[s("p",[t._v("将代理设为自己")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("  subVC.delegate = self\n")])])])]),t._v(" "),s("li",[s("p",[t._v("实现代理方法")]),t._v(" "),s("div",{staticClass:"language-swift line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-swift"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("backStr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("str"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textF"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" str\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])])])]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("对比可以方法 Swift 代理模式 与 Objective-C 用法完全相同，只是语法发生了变化。")]),t._v(" "),s("p",[t._v("值得一提的是Swift 的扩展 "),s("code",[t._v("extension")]),t._v("可以用来继承协议,实现代码隔离，便于维护。")]),t._v(" "),s("div",{staticClass:"language-swift line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-swift"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// 使用扩展继承协议 实现协议方法 可以分离代码")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extension")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("ViewController")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("SubViewDelegate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// 实现代理方法")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("backStr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("str"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textF"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" str\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h2",{attrs:{id:"demo源码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#demo源码"}},[t._v("#")]),t._v(" Demo源码")]),t._v(" "),s("p",[t._v("最后附上"),s("a",{attrs:{href:"https://github.com/qiubaiying/iOS-Delegate_Demo",target:"_blank",rel:"noopener noreferrer"}},[t._v("Demo源码"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("如果对你有帮助的话，"),s("strong",[t._v("Star")]),t._v("✨下一吧！")])])}),[],!1,null,null,null);a.default=n.exports}}]);